#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <string.h>
/*
int main() {
	printf("Para crear un nuevo usuario seleccione la opción definida.");
	printf("\t-Inicio de sesión.\n\tCreación de cuenta");

}
*/
#define N 45
#define B 2
#define USUARIO1 "Javier"
#define CONTRASEÑA1 "capricornio420"
#define USUARIO2 "Pablo"
#define CONTRASEÑA2 "capricornio69"
#define USUARIO3 "Jaime"
#define CONTRASEÑA3 "Jej737oqj"
#define LONGITUD 25
#define INTENTOSMAX 5


typedef struct {
	char nombre[N];
	char apellidos[N];
	char correo[N];
	char usuario[N];
	char contraseña[N];
	char recontraseña[N];

}Cuenta;

int main() {
	char respuesta[B];
	printf("Desea crear una cuenta:");
	printf("\t SI \tNO\n");
	gets_s(respuesta);

	char t = respuesta[0];
	Cuenta cuenta1;
	char usuario[LONGITUD + 1];
	char clave[LONGITUD + 1];
	int intento = 0;
	int klk = 0;
	int i = 0;
	int largo = 0, j = 0;
	switch (t)
	{
	case 'S':
		printf("Escriba los datos que se le piden a continuación\n");
		printf("Nombre:");
		gets_s(cuenta1.nombre);

		printf("Apellidos:");
		gets_s(cuenta1.apellidos);

		printf("Correo electrónico:");
		gets_s(cuenta1.correo);

		printf("USUARIO:");
		gets_s(cuenta1.usuario);

		printf("Contraseña (minimo 8 caracteres):");
		gets_s(cuenta1.contraseña);

		while (cuenta1.contraseña[j] != '\0')
		{
			largo++;
			if (cuenta1.contraseña[j] == ' ')
				largo--;
			j++;
		}

		if (largo < 8) {
			printf("OBLIGATORIO 8 CARACTERES\n");
			printf("Contraseña (minimo 8 caracteres):");
			gets_s(cuenta1.nombre);
		}

		printf("Repetir contraseña:");
		gets_s(cuenta1.nombre);
		int strcmp(const char* cadena1, const char* cadena2);

		if (strcmp(cuenta1.contraseña, cuenta1.recontraseña) == 0)
		{
			printf("Contraseñas distintas");
		}
		else {
			printf("Pulse la tecla 'enter' para continuar:");
			scanf_s("");
		}
		printf("Si desea consultar su perfil, introduzca su usuario y contraseña");


		do {
			i = 0;
			system("cls");
			printf("\n\t\t\tIntroduzca sus credenciales\n");
			printf("\n\tUSUARIO: ");
			gets_s(usuario);
			printf("\n\tCLAVE: ");
			gets_s(clave);

			if (strcmp(usuario, USUARIO1) == 0 && strcmp(clave, CONTRASEÑA1) == 0 || strcmp(usuario, USUARIO2) == 0 && strcmp(clave, CONTRASEÑA2) == 0 || strcmp(usuario, USUARIO3) == 0 && strcmp(clave, CONTRASEÑA3) == 0 || strcmp(usuario, cuenta1.usuario) == 0 && strcmp(clave, cuenta1.contraseña) == 0) {
				klk = 1;

			}
			else {
				printf("\nEl nombre de usuario y/o la clave no son correctos\n");
				intento++;
				printf("\nHa consumido %d de sus 5 intentos\n", intento);
				getchar();
			}

		}

		while (intento < INTENTOSMAX && klk == 0);

		if (klk == 1) {
			printf("\n\n\tBienvenido Doctor\n\n\n");

		}
		else {
			printf("\n\nHa alcanzado el numero maximo de intentos\n\n\n");
		}
		break;

	case 'N':

		do {
			i = 0;
			system("cls");
			printf("\n\t\t\tIntroduzca sus credenciales\n");
			printf("\n\tUSUARIO: ");
			gets_s(usuario);
			printf("\n\tCLAVE: ");
			gets_s(clave);

			if (strcmp(usuario, USUARIO1) == 0 && strcmp(clave, CONTRASEÑA1) == 0 || strcmp(usuario, USUARIO2) == 0 && strcmp(clave, CONTRASEÑA2) == 0 || strcmp(usuario, USUARIO3) == 0 && strcmp(clave, CONTRASEÑA3) == 0 || strcmp(usuario, cuenta1.usuario) == 0 && strcmp(clave, cuenta1.contraseña) == 0) {
				klk = 1;

			}
			else {
				printf("\nEl nombre de usuario y/o la clave no son correctos\n");
				intento++;
				printf("\nHa consumido %d de sus 5 intentos\n", intento);
				getchar();
			}

		}

		while (intento < INTENTOSMAX && klk == 0);

		if (klk == 1) {
			printf("\n\n\tBienvenido Doctor\n\n\n");

		}
		else {
			printf("\n\nHa alcanzado el numero maximo de intentos\n\n\n");
		}
		break;

	default:
		printf("Indiquelo mediante un Si o un No");
		break;
	}



}
